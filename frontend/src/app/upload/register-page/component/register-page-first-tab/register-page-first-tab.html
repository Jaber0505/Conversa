<form (ngSubmit)="onNext()" #f="ngForm" class="form">
  <div class="form__row">
    <shared-input
      id="prenom"
      name="prenom"
      label="{{ 'register.firstTab.firstName' | t }}"
      [(ngModel)]="firstTabInfo.prenom"
      [errorMessage]="formSubmitted && firstTabInfo.prenom.length===0"
      required>
    </shared-input>
  </div>

  <div class="form__row">
    <shared-input
      id="nom"
      name="nom"
      label="{{ 'register.firstTab.lastName' | t }}"
      [(ngModel)]="firstTabInfo.nom"
      [errorMessage]="formSubmitted && firstTabInfo.nom.length===0"
      required>
    </shared-input>
  </div>

  <div class="form__row">
    <shared-input
      id="age"
      name="age"
      type="number"
      label="{{ 'register.firstTab.age' | t }}"
      [errorMessage]=" formSubmitted && firstTabInfo.age<18"
      [(ngModel)]="firstTabInfo.age">
    </shared-input>
  </div>

  <div class="form__row">
    <label for="native-select">{{ 'register.firstTab.nativeLangs' | t }}</label>
    <shared-select
      id="native-select"
      [options]="langs"
      [value]="pendingNative"
      (valueChange)="pendingNative = $event"
      [searchable]="true"
      [placeholder]="'register.firstTab.selectLang' | t">
    </shared-select>

    <div class="chips" *ngIf="firstTabInfo.native_langs?.length">
      <button
        type="button"
        class="chip"
        *ngFor="let code of firstTabInfo.native_langs"
        (click)="removeNative(code)">
        <shared-badge variant="accent" tone="soft">
          {{ displayLabel(langs, code) }}
          <span class="chip-x" aria-hidden="true">×</span>
          <span class="sr-only">{{ 'common.remove' | t }}</span>
        </shared-badge>
      </button>
    </div>

    <div class="row-actions">
      <shared-button
        type="button"
        variant="outline"
        size="sm"
        (click)="addNative()">
        {{ 'common.add' | t }}
      </shared-button>
    </div>
  </div>

  <!-- Langues cibles (écrit dans firstTabInfo.target_langs) -->
  <div class="form__row">
    <label for="target-select">{{ 'register.firstTab.targetLangs' | t }}</label>
    <shared-select
      id="target-select"
      [options]="langs"
      [value]="pendingTarget"
      (valueChange)="pendingTarget = $event"
      [searchable]="true"
      [placeholder]="'register.firstTab.selectLang' | t">
    </shared-select>

    <div class="chips" *ngIf="firstTabInfo.target_langs?.length">
      <button
        type="button"
        class="chip"
        *ngFor="let code of firstTabInfo.target_langs"
        (click)="removeTarget(code)">
        <shared-badge variant="tertiary" tone="soft">
          {{ displayLabel(langs, code) }}
          <span class="chip-x" aria-hidden="true">×</span>
          <span class="sr-only">{{ 'common.remove' | t }}</span>
        </shared-badge>
      </button>
    </div>

    <div class="row-actions">
      <shared-button
        type="button"
        variant="outline"
        size="sm"
        (click)="addTarget()">
        {{ 'common.add' | t }}
      </shared-button>
    </div>
  </div>
</form>

<navigation-buttons
  [showPrev]="false"
  [showNext]="true"
  [prevLabel]="'common.back'"
  [nextLabel]="'common.next'"
  [prevDisabled]="true"
  [nextDisabled]="false"
  align="between"
  [block]="false"
  (nextClick)="onNext()">
</navigation-buttons>
